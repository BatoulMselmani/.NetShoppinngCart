@model List<Product>

<table class="table col-md-2 offset-md-2">
        <thead>
            <tr>
                <th>Name</th>
                <th>Price</th>
                <th>On Sale</th>
                <th>Sale Price</th>
        
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
        @if (Model == null)
        {

            <p>No results</p>
        } else{
            @foreach (var product in Model)
            {
                <tr>
                    <td>@product.Name</td>
                    <td>@product.Price</td>
                    <td>@Html.CheckBoxFor(model => product.IsOnSale)</td>
                    <td>@Html.TextBoxFor(model => product.SalePrice)</td>
                    
                    <td>
                    <button class="btn btn-success" onclick="updateSale(@product.Id)">Update</button>

                    </td>
                </tr>
            }}
        </tbody>
    </table>

<script>
    function updateSale(Id) {
        console.log("Updating sale for product ID: " + Id);
        var isOnSale = $("#IsOnSale_" + Id).is(":checked");
        var salePrice = $("#SalePrice_" + Id).val();
      //var saleEndDate = $("#SaleEndDate_" + Id).val();

        $.post("/Products/UpdateSaleStatus", { Id: Id, isOnSale: isOnSale, salePrice: salePrice }, function (data) {
            location.reload(); // Refresh the page after updating
        });
    }
</script>

